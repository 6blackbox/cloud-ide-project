"use client";import { useEffect } from "react";import { Command } from "cmdk";import { Search, Sun, Play, Eraser, FilePlus, Code2, Wand2 } from "lucide-react";export default function CommandPalette({   open,   setOpen,   runCode,   formatCode,   clearTerminal,   toggleTheme,   createNewFile,  files,  setActiveFile}) {  useEffect(() => {    const down = (e) => {      if (e.key === "k" && (e.metaKey || e.ctrlKey)) {        e.preventDefault();        setOpen((open) => !open);      }    };    document.addEventListener("keydown", down);    return () => document.removeEventListener("keydown", down);  }, [setOpen]);  return (    <Command.Dialog      open={open}      onOpenChange={setOpen}      label="Global Command Menu"      className="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200"      onClick={() => setOpen(false)}    >      <div         className="w-full max-w-lg bg-[#0a0a0a] border border-[var(--border-color)] rounded-xl shadow-2xl overflow-hidden ring-1 ring-white/10"        onClick={(e) => e.stopPropagation()}      >        <div className="flex items-center border-b border-[var(--border-color)] px-4 h-14">          <Search className="w-5 h-5 text-[var(--text-muted)] mr-3" />          <Command.Input            className="flex-1 bg-transparent outline-none text-[var(--text-main)] placeholder:text-[var(--text-muted)] font-medium"            placeholder="Type a command or search files..."          />          <div className="flex gap-1">             <kbd className="bg-white/10 text-[var(--text-muted)] px-2 py-0.5 rounded text-[10px] font-mono">ESC</kbd>          </div>        </div>        <Command.List className="max-h-[300px] overflow-y-auto p-2 scroll-py-2">          <Command.Empty className="py-6 text-center text-sm text-[var(--text-muted)]">No results found.</Command.Empty>          <Command.Group heading="Actions" className="text-[10px] uppercase tracking-wider text-[var(--text-muted)] font-bold mb-2 px-2">            <Command.Item onSelect={() => { runCode(); setOpen(false); }} className="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm text-[var(--text-main)] cursor-pointer aria-selected:bg-[var(--accent)] aria-selected:text-white transition-colors">              <Play className="w-4 h-4" /> <span>Run Code</span>            </Command.Item>            {}            <Command.Item onSelect={() => { formatCode(); setOpen(false); }} className="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm text-[var(--text-main)] cursor-pointer aria-selected:bg-[var(--accent)] aria-selected:text-white transition-colors">              <Wand2 className="w-4 h-4" /> <span>Format Code</span>            </Command.Item>            <Command.Item onSelect={() => { clearTerminal(); setOpen(false); }} className="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm text-[var(--text-main)] cursor-pointer aria-selected:bg-[var(--accent)] aria-selected:text-white transition-colors">              <Eraser className="w-4 h-4" /> <span>Clear Terminal</span>            </Command.Item>            <Command.Item onSelect={() => { createNewFile(); setOpen(false); }} className="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm text-[var(--text-main)] cursor-pointer aria-selected:bg-[var(--accent)] aria-selected:text-white transition-colors">              <FilePlus className="w-4 h-4" /> <span>New File...</span>            </Command.Item>            <Command.Item onSelect={() => { toggleTheme(); setOpen(false); }} className="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm text-[var(--text-main)] cursor-pointer aria-selected:bg-[var(--accent)] aria-selected:text-white transition-colors">              <Sun className="w-4 h-4" /> <span>Toggle Theme</span>            </Command.Item>          </Command.Group>          <div className="h-[1px] bg-[var(--border-color)] my-2 mx-2" />          <Command.Group heading="Files" className="text-[10px] uppercase tracking-wider text-[var(--text-muted)] font-bold mb-2 px-2">            {Object.keys(files).map((fileName) => (                <Command.Item key={fileName} onSelect={() => { setActiveFile(fileName); setOpen(false); }} className="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm text-[var(--text-main)] cursor-pointer aria-selected:bg-[var(--accent)] aria-selected:text-white transition-colors">                    <Code2 className="w-4 h-4 opacity-70" /> <span>{fileName}</span>                </Command.Item>            ))}          </Command.Group>        </Command.List>      </div>    </Command.Dialog>  );}